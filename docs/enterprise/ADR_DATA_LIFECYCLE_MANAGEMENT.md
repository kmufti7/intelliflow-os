# ADR: Data Lifecycle Management (DLM) Policy

## Status

**Accepted** — February 2026 (Vetoed for implementation — gap documented)

---

## Context

Data Lifecycle Management (DLM) governs the retention, archival, and purging of data across its lifecycle. In regulated industries, DLM is not optional:

- **HIPAA minimum necessary principle** requires that PHI retention be limited to what is necessary for the stated purpose, with defined disposal procedures.
- **SEC 17a-4** mandates specific retention periods for broker-dealer records (6 years for most categories), with preservation in non-rewritable, non-erasable format.
- **SR 11-7 supervisory guidance** expects model risk records — including validation results, ongoing monitoring data, and audit trails — to be retained for the duration of model usage plus examination windows.
- **EU AI Act** requires high-risk AI system operators to maintain logs for periods appropriate to the intended purpose of the system.

IntelliFlow OS generates three categories of persistent data that require DLM policy:

1. **WORM audit log** — HMAC-SHA256 hash-chained governance events (workflow starts, tool executions, kill-switch triggers). Append-only, immutable by design.
2. **Token FinOps ledger** — Per-invocation cost receipts with immutable USD calculations. Append-only financial telemetry.
3. **Application data** — Tickets, audit events, interaction logs generated by SupportFlow, CareFlow, and ClaimsFlow modules.

Without a DLM policy, these append-only stores grow unbounded, eventually consuming available disk and degrading system performance.

---

## Decision

IntelliFlow OS **does not implement a DLM enforcement layer**. The deploying institution owns DLM policy execution.

---

## Rationale

DLM policy is institution-specific. Retention schedules, purge triggers, legal hold workflows, and archival destinations vary by:

- **Regulator** — SEC retention periods differ from HIPAA minimum necessary timelines and SR 11-7 examination windows.
- **Jurisdiction** — EU data protection (GDPR right to erasure) conflicts with US financial record retention requirements.
- **Internal policy** — Enterprise data governance committees define retention tiers, archival cadence, and disposal approval chains that reflect institutional risk appetite.

A platform-level DLM implementation would either be too opinionated (wrong retention periods for most deployers) or too generic (a configurable TTL that provides no compliance value). Neither outcome serves the regulated enterprise buyer.

---

## What IntelliFlow OS Provides

IntelliFlow OS does not enforce DLM, but it provides the hooks that make institution-specific DLM policies implementable:

| Component | DLM-Ready Property | How It Helps |
|-----------|-------------------|--------------|
| **WORMLogRepository** | Immutable audit trail with HMAC-SHA256 hash chain, session-bounded trace_id | Institution layers archival policy on top — move to cold storage after retention period without breaking chain verification |
| **TokenLedgerRepository** | Append-only financial receipts with point-in-time USD calculation | Institution applies departmental archival schedules — historical cost data survives pricing changes regardless of when it's archived |
| **Kill-Switch audit events** | Structured KILL_SWITCH_TRIGGERED payloads with failed_rules and state_snapshot | Institution retains sanctions intercept records per OFAC recordkeeping requirements |
| **SQLite storage layer** | Single-file database with WAL journaling | Institution applies cloud-native retention policies (S3 Object Lock, Azure Immutable Blob Storage) at the storage layer |

The platform's immutability guarantees (WORM triggers, HMAC chain, fail-closed write behavior) ensure that DLM operations cannot silently corrupt data during archival or migration. An institution can archive, but cannot modify.

---

## Alternatives Considered

### Option A: SQLite TTL-Based Purge (Rejected)

Implement a configurable time-to-live (TTL) on each table. A background process deletes rows older than the TTL threshold.

**Rejected because:**
- TTL-based purge is too simplistic for regulated use. SEC 17a-4 retention periods differ by record type (6 years for most, 3 years for others). A single TTL value cannot express these rules.
- Purging WORM audit entries breaks the HMAC hash chain — downstream verification fails after any deletion. Archival (move to cold storage) is the correct operation, not deletion.
- No legal hold support. TTL purges execute regardless of pending litigation or regulatory examination.

### Option B: Cloud-Native DLM Integration (Rejected)

Build adapters for AWS S3 Lifecycle Policies, Azure Immutable Blob Storage Policy Locks, and GCP Object Lifecycle Management.

**Rejected because:**
- Cloud-specific DLM integration makes the reference architecture non-portable. An Azure-first deployer cannot use S3 Lifecycle adapters.
- DLM policy configuration (retention tiers, archival destinations, legal hold triggers) belongs in the institution's cloud governance layer, not in application middleware.
- Deployers already have cloud DLM tooling managed by their infrastructure teams. Duplicating this capability in application code creates two sources of truth for retention policy.

### Option C: Document the Gap (Selected)

Document DLM as an accepted, reasoned architecture gap. Provide DLM-ready hooks. Direct deployers to appropriate cloud-native DLM mechanisms.

**Selected because:**
- Transparent about what the platform does and does not do.
- Respects institutional autonomy over data governance policy.
- Avoids shipping a generic DLM layer that no regulated deployer would trust in production.

---

## Consequences

### Accepted Gap

Deployers **must** implement DLM via their cloud provider or internal data governance tooling:

- **AWS**: S3 Object Lock with Governance or Compliance mode retention policies. S3 Lifecycle transitions to Glacier for long-term archival.
- **Azure**: Immutable Blob Storage with time-based or legal hold policy locks. Lifecycle Management rules for tier transitions (Hot → Cool → Archive).
- **On-premises**: Enterprise backup and archival solutions (Commvault, Veritas) with retention schedule enforcement.

Without DLM, the WORM audit log and Token FinOps ledger grow unbounded. For production deployments, the deploying institution should plan for 90-day archival to cold storage as a baseline, adjusted to their regulatory retention requirements.

### Positive

- No platform-level retention policy conflicts with institution-specific requirements.
- DLM-ready hooks (immutability, hash chain, trace_id correlation) simplify institutional DLM implementation.
- Documented gap demonstrates architectural maturity — knowing what not to build is as important as knowing what to build.

### Negative

- Deployers carry full responsibility for DLM execution. No platform-provided guardrails against unbounded storage growth.
- Integration testing of DLM policies requires deployer effort — platform does not ship DLM test fixtures.

---

## Compliance Alignment

| Framework | Relevance | IntelliFlow OS Posture |
|-----------|-----------|----------------------|
| **SR 11-7** | Expects model risk records retained for duration of model usage plus examination windows | Platform provides immutable WORM audit trail; deploying institution defines retention period aligned to examination schedule |
| **SEC 17a-4** | Requires broker-dealer records preserved in non-rewritable format for 6 years (most categories) | WORM logger with SQLite triggers enforces write-once immutability; archival to compliant storage is deployer responsibility |
| **HIPAA** | Minimum necessary principle — PHI retained only for stated purpose, disposed when no longer needed | Platform does not store PHI in audit logs (PHI stays in local FAISS); deploying institution manages PHI lifecycle independently |
| **EU AI Act** | High-risk AI system logs retained for appropriate periods | Platform generates structured, immutable logs; deploying institution determines retention period based on risk classification |

All compliance references use "aligned to," "consistent with," and "expects" framing — IntelliFlow OS does not claim compliance certification.

---

## References

| Reference | Relevance |
|-----------|-----------|
| [SR 11-7: Guidance on Model Risk Management](https://www.federalreserve.gov/supervisionreg/srletters/sr1107.htm) | Federal Reserve supervisory guidance on model risk record retention |
| [SEC Rule 17a-4](https://www.sec.gov/rules/final/34-38245.txt) | Broker-dealer record preservation requirements |
| [HIPAA Privacy Rule — Minimum Necessary](https://www.hhs.gov/hipaa/for-professionals/privacy/guidance/minimum-necessary-requirement/index.html) | PHI retention and disposal principles |
| [AWS S3 Object Lock](https://docs.aws.amazon.com/AmazonS3/latest/userguide/object-lock.html) | Immutable object storage for compliance retention |
| [Azure Immutable Blob Storage](https://learn.microsoft.com/en-us/azure/storage/blobs/immutable-storage-overview) | Time-based and legal hold retention policies |

---

*Apache 2.0 — Copyright 2025-2026 Kaizen Works, LLC*
